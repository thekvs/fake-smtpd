**Эмулятор SMTP сервера**

## Установка компилятора Rust

Для установки компилятора языка программирования Rust необходимо выполнить следующую команду и затем следовать инструкциям в терминале: `curl https://sh.rustup.rs -sSf | sh`

Подробнее см. [на официальном сайте](https://www.rust-lang.org/en-US/install.html).

## Сборка

Сборка возможна несколькими способами:

1. Через вызов утилиты `make`. В этом случае будет собран deb пакет, однако для этого необходимо наличие установленной вспомогательной утилиты [fpm](https://github.com/jordansissel/fpm).
1. Непосредственно через экосистему Rust:
	1. Сборка с оптимизацией без отладочных символов: `cargo build --release`. Исполнимый файл: `target/release/fake-smtpd`
	1. Сборка без оптимизации с отладочными символами: `cargo build`. Исполнимый файл: `target/debug/fake-smtpd`

## Использование

Сервер надо запускать на стороне "жертвы".

Примеры вариантов запуска:

1. `fake-smtpd --address 192.168.1.1:25 --workers 1500` -- сервер запускается на `192.168.1.1:25` в режиме **приема всех** входящих писем, Одновременно может обслуживаться не более 1500 соединений.
1. `fake-smtpd --address 192.168.1.1:25 --workers 1500 --reject-ratio 1` -- аналогично предыдущему, но теперь **все** входящие письма будут **отклоняться** с ошибкой отсутствия пользователя.
1. `fake-smtpd --address 192.168.1.1:25 --workers 1500 --reject-ratio 0.5` -- аналогично предыдущему, но теперь только 50% входящих писем будут **отклоняться** с ошибкой отсутствия пользователя.

Более подробную справку по поддерживаемым опциям можно получить, запустив программу с ключем `--help`.
